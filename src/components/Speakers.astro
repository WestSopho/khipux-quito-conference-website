---
import SpeakerCard from "./SpeakerCard.astro";
import speakersData from "../data/speakers.json";

// Static imports for speaker images
import laraImage from "../assets/speakers/lara.webp?url";
import dignazioImage from "../assets/speakers/dignazio.webp?url";
import mosqueraImage from "../assets/speakers/mosquera.webp?url";
import corbatImage from "../assets/speakers/corbat.webp?url";
import moralesImage from "../assets/speakers/morales.webp?url";

// Image lookup map - add new speaker images here
const imageMap: Record<string, string> = {
  "lara.webp": laraImage,
  "dignazio.webp": dignazioImage,
  "mosquera.webp": mosqueraImage,
  "corbat.webp": corbatImage,
  "morales.webp": moralesImage,
};

// Map speakers with their resolved image paths
const speakers = speakersData.map((speaker) => ({
  ...speaker,
  imageSrc: imageMap[speaker.image] || "",
}));
---

<section id="speakers" class="bg-khipu-black text-khipu-white py-16">
  <div class="content-container flex flex-col items-center">
    <h2 class="mb-12 text-center text-4xl font-bold italic md:text-6xl">
      Speakers
    </h2>

    <div class="flex w-full max-w-4xl flex-col gap-12">
      {
        speakers.map((speaker) => (
          <SpeakerCard
            name={speaker.name}
            country={speaker.country}
            institution={speaker.institution}
            role={speaker.role}
            description={speaker.description}
            imageSrc={speaker.imageSrc}
            github={speaker.github}
            linkedin={speaker.linkedin}
          />
        ))
      }
    </div>
  </div>
</section>
