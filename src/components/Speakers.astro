---
import SpeakerCard from "./SpeakerCard.astro";
import speakersData from "../data/speakers.json";

// Static imports for speaker images (without ?url for Image optimization)
import laraImage from "../assets/speakers/lara.webp";
import dignazioImage from "../assets/speakers/dignazio.webp";
import mosqueraImage from "../assets/speakers/mosquera.webp";
import corbatImage from "../assets/speakers/corbat.webp";
import moralesImage from "../assets/speakers/morales.webp";
import martensImage from "../assets/speakers/martens.webp";
import biniImage from "../assets/speakers/bini.webp";
import dominguezImage from "../assets/speakers/dominguez.webp";

// Image lookup map - add new speaker images here
const imageMap: Record<string, any> = {
  "lara.webp": laraImage,
  "dignazio.webp": dignazioImage,
  "mosquera.webp": mosqueraImage,
  "corbat.webp": corbatImage,
  "morales.webp": moralesImage,
  "martens.webp": martensImage,
  "bini.webp": biniImage,
  "dominguez.webp": dominguezImage,
};

// Map speakers with their resolved image objects
const speakers = speakersData.map((speaker) => ({
  ...speaker,
  imageSrc: imageMap[speaker.image] || "",
}));
---

<section id="speakers" class="bg-khipu-black text-khipu-white py-16">
  <div class="content-container flex flex-col items-center">
    <h2 class="mb-12 text-center text-4xl font-bold italic md:text-6xl">
      Speakers
    </h2>

    <div class="flex w-full max-w-4xl flex-col gap-12">
      {
        speakers.map((speaker) => (
          <SpeakerCard
            name={speaker.name}
            country={speaker.country}
            institution={speaker.institution}
            role={speaker.role}
            description={speaker.description}
            imageSrc={speaker.imageSrc}
            github={speaker.github}
            linkedin={speaker.linkedin}
          />
        ))
      }
    </div>
  </div>
</section>
